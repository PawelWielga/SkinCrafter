import{r as s,j as e}from"./index-BDW4-rm3.js";import{N as p,U as x,P as h}from"./PreviewArea-BNdfRsP8.js";async function j(r){const a=await fetch(`https://api.mojang.com/users/profiles/minecraft/${encodeURIComponent(r)}`);if(!a.ok)throw new Error("User not found");const c=await a.json(),n=await fetch(`https://sessionserver.mojang.com/session/minecraft/profile/${c.id}`);if(!n.ok)throw new Error("Failed to fetch profile");const t=(await n.json()).properties.find(o=>o.name==="textures");if(!t)throw new Error("Skin texture not found");return JSON.parse(atob(t.value)).textures.SKIN.url}const g=()=>{const[r,a]=s.useState(""),[c,n]=s.useState(null),[l,t]=s.useState(null),[u,o]=s.useState(!1),d=s.useCallback(m=>{a(m.target.value)},[]),f=s.useCallback(async m=>{if(m.preventDefault(),!r.trim()){t("Please enter a username.");return}t(null),o(!0);try{const i=await j(r.trim());n(i)}catch(i){i instanceof Error?t(i.message):t("An unexpected error occurred."),n(null)}finally{o(!1)}},[r]);return e.jsxs("div",{className:"container",children:[e.jsx(p,{}),e.jsx(x,{}),e.jsxs("div",{className:"main-content",children:[e.jsxs("form",{onSubmit:f,style:{marginBottom:"1rem"},children:[e.jsx("input",{type:"text",value:r,onChange:d,placeholder:"Minecraft username","aria-label":"Minecraft username"}),e.jsx("button",{type:"submit",disabled:u,children:u?"Loadingâ€¦":"Load Skin"})]}),l&&e.jsx("div",{className:"error-message",children:l}),e.jsx(h,{texture:c})]})]})};export{g as default};
